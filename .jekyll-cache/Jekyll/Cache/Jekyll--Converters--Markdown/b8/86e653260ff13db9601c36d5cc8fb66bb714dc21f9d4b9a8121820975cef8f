I"+"<p>En el <a href="https://www.samurantech.com/instalar-centos-raspberry-pi/">post anterior</a> instalamos CentOS en nuestra Raspberry, hoy la configuraremos para poder darle uso.</p>

<p>Normalmente los equipos obtienen su dirección IP a través del protocolo <a href="https://es.wikipedia.org/wiki/Protocolo_de_configuraci%C3%B3n_din%C3%A1mica_de_host">DHCP (Dynamic Network Configuration Protocol)</a>, un servicio que proporciona una IP dinámica, además de la máscara de subred, la puerta de enlace y los DNS a los equipos de la red. En redes domésticas quien cumple esta función suele ser el router que nos proporciona nuestro proveedor de internet.</p>

<p>Pero en entornos profesionales, o como es en nuestro caso, no queremos que nuestro servidor tenga un IP que le haya proporcionado el DHCP y que pueda cambiar. Para ello se configura un IP estática o manual y tener bajo control la IP de ese servidor.</p>

<h2 id="conectarnos-al-servidor">Conectarnos al servidor</h2>

<p>Podemos acceder al servidor conectando una pantalla y un teclado directamente a la Raspberry Pi y trabajar directamente ahí o podemos conectarnos por SSH.</p>

<p>Para poder conectarnos por SSH, tendremos que averiguar su IP. Podemos saber esto yendo al DHCP del router o hacer un escaneo de red con herramientas como <a href="https://www.advanced-ip-scanner.com/es/">Advanced IP Scanner</a>.</p>

<p>Una vez averiguada la IP, podemos conectarnos por SSH utilizando <a href="https://www.putty.org/">Putty</a> o <a href="https://mobaxterm.mobatek.net/download.html">MobaXterm</a>, eso os lo dejo al gusto de cada uno. Ponemos la IP del servidor y le ponemos las credenciales, que será el usuario <code class="language-plaintext highlighter-rouge">root</code> y la contraseña que hayamos definido.</p>

<h2 id="configurar-la-ip-estática">Configurar la IP estática</h2>

<p>Está va a ser la configuración que yo voy a hacer en mi servidor.</p>

<blockquote>
  <p>Dirección IP: 192.168.0.150<br />
Subred: 255.255.255.0<br />
Puerta de enlace (Router): 192.168.0.1<br />
Servidor DNS 1: 192.168.0.1<br />
Servidor DNS 2: 1.1.1.1</p>
</blockquote>

<h3 id="averiguar-interfaces-de-red-en-nuestro-servidor">Averiguar interfaces de red en nuestro servidor</h3>

<p>Puedes saber las interfaces que tiene el servidor ejecutando el comando:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ifconfig <span class="nt">-a</span>
</code></pre></div></div>

<p>O</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip a
</code></pre></div></div>

<p>El resultado del comando será parecido a lo que muestro a continuación. En mi caso quiero cambiar la IP a la interfaz <code class="language-plaintext highlighter-rouge">eth0</code>, que es la interfaz cableada.<br />
<code class="language-plaintext highlighter-rouge">lo</code> es la interfaz de <em>loopback</em>, donde está configurado la IP <em>127.0.0.1</em> o localhost.<br />
<code class="language-plaintext highlighter-rouge">wlan0</code> es la interfaz de conexión inalámbrica, para ir por Wi-FI.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether dc:a6:32:a3:a8:b4 brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.24/24 brd 192.168.0.255 scope global noprefixroute dynamic eth0
       valid_lft 2733sec preferred_lft 2733sec
    inet6 fe80::806d:e80d:c6fb:69d6/64 scope link noprefixroute
       valid_lft forever preferred_lft forever
3: wlan0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc pfifo_fast state DOWN group default qlen 1000
    link/ether 62:c3:19:db:2a:2c brd ff:ff:ff:ff:ff:ff
</code></pre></div></div>

<h3 id="configurar-la-ip-estática-1">Configurar la IP estática</h3>

<ul>
  <li>Método 1</li>
</ul>

<p>Para este método, editaremos el fichero de la interfaz de red que se encuentra en el directorio <code class="language-plaintext highlighter-rouge">/etc/sysconfig/network-scripts</code>. Para la interfaz <code class="language-plaintext highlighter-rouge">eth0</code>, crearemos el fichero <code class="language-plaintext highlighter-rouge">ifcfg-eth0</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi /etc/sysconfig/network-scripts/ifcfg-eth0
</code></pre></div></div>

<p>El contenido que tenemos que poner en el fichero.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># MAC de la interfaz #
HWADDR=dc:a6:32:a3:a8:b4
TYPE=Ethernet
BOOTPROTO=none
# IP estática #
IPADDR=192.168.0.150
# Subred #
NETMASK=255.255.255.0
# Puerta de enlace #
GATEWAY=192.168.0.1
# Servidores DNS #
DNS1=192.168.0.1
DNS2=1.1.1.1
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
# Deshabilitar ipv6 #
IPV6INIT=no
# Nombre de la interfaz #
NAME=eth0
DEVICE=eth0
# Activar la interfaz en el arranque #
ONBOOT=yes
</code></pre></div></div>

<ul>
  <li>Método 2</li>
</ul>

<p>También podemos usar <code class="language-plaintext highlighter-rouge">nmtui</code>, una interfaz de usuario en texto para configurar interfaces de red.</p>

<blockquote>
  <p>En caso de no tenerlo instalado, podemos obtenerlo con el comando <code class="language-plaintext highlighter-rouge">yum install NetworkManager-tui</code></p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmtui
</code></pre></div></div>

<p>Seleccionamos <strong>Edit a connection</strong> y presionamos <strong>Enter</strong>.</p>

<p><img src="/assets/img/posts/nmtui-01.png" alt="Edit a connection" title="Edit a connection" /></p>

<p><strong>Elegimos la interfaz de red</strong> y <strong>Edit</strong></p>

<p><img src="/assets/img/posts/nmtui-02.png" alt="Elegir una interfaz de red" title="Elegir una interfaz de red" /></p>

<p><strong>Configuramos la IP</strong> y le damos a <strong>OK</strong></p>

<p><img src="/assets/img/posts/nmtui-03.png" alt="Configurar IP" title="Configurar IP" /></p>

<h3 id="reinciamos-la-red">Reinciamos la red</h3>

<p>Finalmente, reiniciamos el servicio de red para que se hagan efectivo los cambios que hemos hecho. Cuando hagamos esto no echará de la sesión porque se ha cambiado de IP.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl restart network
</code></pre></div></div>

<p>Volvemos a ejecutar el comando <code class="language-plaintext highlighter-rouge">ip a</code> para comprobar que el cambio se ha hecho efectivo.</p>

<h3 id="tip-final-cambiar-hostname">Tip final. Cambiar hostname</h3>

<p>Ya que hemos configurado la IP del servidor, vamos a cambiar también el nombre del mismo por alguno más descriptivo y porque personalmente no me gusta que los servidores se llamen <em>localhost</em>.</p>

<p>Aprovechando que hemos trabajado con <code class="language-plaintext highlighter-rouge">nmtui</code>, haremos el cambio desde ahí.</p>

<p>Seleccionamos <strong>Set system hostname</strong> y presionamos <strong>Enter</strong>.</p>

<p><img src="/assets/img/posts/nmtui-04.png" alt="Cambiar hostname" title="Cambiar hostname" /></p>

<p>Ahí ponemos el nombre que queramos que tenga el servidor y presionamos <strong>OK</strong>.</p>

<p>La gente que quiera hacerlo por comando, tiene a su disposición <code class="language-plaintext highlighter-rouge">hostnamectl </code>.</p>

<p>Para cambiar el nombre sería de la siguiente manera:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hostnamectl set-hostname <span class="s2">"&lt;nombre_servidor&gt;"</span>
</code></pre></div></div>

<p>Para que se efectúen los cambios podemos bien reiniciar el servidor o el servicio <code class="language-plaintext highlighter-rouge">systemctl restart systemd-hostnamed</code>. Para comprobar que el cambio se ha hecho con <code class="language-plaintext highlighter-rouge">hostname</code> podremos confirmar que es así.<br />
Para el nombre que aparece en la terminal <code class="language-plaintext highlighter-rouge">[root@localhost ~]#</code>, con salir de la sesión SSH y volver a conectarnos ya nos aparecerá.</p>

<p>Espero que os haya gustado y os haya servido de ayuda. ¡Hasta la próxima!</p>

:ET