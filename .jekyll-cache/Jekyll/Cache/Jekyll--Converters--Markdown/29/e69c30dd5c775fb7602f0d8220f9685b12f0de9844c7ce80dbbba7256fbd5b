I"<p>Desde hace tiempo tengo varias Raspberry Pi muertas de risa y quiero darles un algún uso, pero no quiero utilizar Raspberry Pi OS, así que instalaremos CentOS 7 para arquitecturas ARM. Como curiosidad, Raspberry Pi OS, antes Raspbian, es el sistema operativo que se suele utilizar en Raspberry Pi basado en Debian.</p>

<p>En caso utilizaré una Raspberry Pi 4 de 4GB de RAM (<a href="https://www.amazon.es/gp/product/B07TC2BK1X">Enlace artículo Amazon</a>, post <strong>no</strong> esponsorizado por Amazon).</p>

<h2 id="descargar-centos-para-raspberry-pi">Descargar CentOS para Raspberry Pi</h2>

<p>Primero tendremos que descargarnos la imagen ISO de los <a href="http://isoredirect.centos.org/altarch/7/isos/armhfp/">repositorios oficiales de CentOS</a>.<br />
En esta página tendremos un listado de los mirrors de CentOS, así que elegiremos uno de la lista.</p>

<p>Una vez en el listado tendremos que elegir el fichero que contiene el <strong>número 4</strong> en el nombre, indicando que es para la Raspberry Pi 4. Un ejemplo sería <code class="language-plaintext highlighter-rouge">CentOS-Userland-7-armv7hl-RaspberryPI-Minimal-4-2009-sda.raw.xz</code>, que contiene <code class="language-plaintext highlighter-rouge">Minimal-4</code>. Esta es la opción que no incluye una interfaz gráfica, sólo terminal.</p>

<p>El resto son versiones para la Raspberry Pi 3, tanto la versión minimal como con distintos entornos de escritorio.</p>

<p>Yo elegiré la versión Minimal, porque no me interesa tener un entorno gráfico, ya que me conectaré a través de SSH a ella.</p>

<p>Una vez descargada, comprobamos si el hash del fichero descargado corresponde con el publicado en la página. Normalmente es el fichero que se encuentra en el mismo directorio de donde hemos sacado la ISO llamado <code class="language-plaintext highlighter-rouge">sha256sum.txt</code>. En él saldrán los hashes en SHA256 de cada uno de los ficheros.</p>

<p>Para comprobarlo lo haremos de las siguientes maneras dependiendo del sistema operativo.</p>

<ul>
  <li>Windows. Desde una consola de powershell, iremos al directorio donde hemos descargado el fichero y ejecutaremos el siguiente comando:
    <pre><code class="language-cmd">Get-FileHash &lt;fichero&gt;
</code></pre>
  </li>
  <li>Linux. Desde la terminal, iremos al directorio donde hemos descargado el fichero y ejecutaremos el siguiente comando:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sha256sum</span> &lt;fichero&gt;
</code></pre></div>    </div>
    <p>En este caso usaremos este comando porque queremos obtener el hash SHA256.</p>
  </li>
</ul>

<p>Obtenido el hash con el comando, ahora sólo es comparar con el que se muestra en la página. No me seáis cafres y con que comprobéis los primeros 6 dígitos y los 6 últimos valdría.</p>

<h2 id="montar-centos-en-la-tarjeta-sd">Montar CentOS en la tarjeta SD</h2>

<p>Cuando hayamos descargado la imagen de CentOS y comprobado que el hash es correcto, vamos a montar la ISO en nuestra tarjeta SD. Yo en este caso utilizaré <a href="https://rufus.ie/">Rufus</a>, pero podéis usar otros como BalenaEtcher.
<strong>A tener en cuenta:</strong> los datos que tengamos en la tarjeta SD se borrarán porque ésta tiene que formatearse.</p>

<p>En caso de que vuestro equipo no tenga lector de tarjetas SD, como me pasa a mí, podéis comprar un lector SD/Micro SD adaptador USB.</p>

<p>Una vez terminado, pondremos la tarjeta en nuestra Raspberry Pi y la conectaremos a la corriente para encenderlo.</p>

<h2 id="trabajando-con-centos">Trabajando con CentOS</h2>

<p>Para poder conectarnos a nuestra Raspberry Pi directamente, tenemos que tener un adaptador Micro HDMI a HDMI, yo os recomiendo comprar este pack que viene con una carcasa para darle un mejor aspecto.  (<a href="https://www.amazon.es/gp/product/B07WN3CHGH">Enlace artículo Amazon</a>)</p>

<p>Además de un teclado USB para poder escribir en la terminal.</p>

<p>El usuario por defecto es <code class="language-plaintext highlighter-rouge">root</code>.<br />
La contraseña por defecto es <code class="language-plaintext highlighter-rouge">centos</code>.</p>

<p>Es recomendable cambiar la contraseña, para ello ejecutamos el comando:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passwd
</code></pre></div></div>

<p>Expandimos la partición de root para que coja el tamaño máximo de la tarjeta SD con <code class="language-plaintext highlighter-rouge">rootfs-expand</code>.</p>

<p>Configuramos la zona horaria que corresponda con <code class="language-plaintext highlighter-rouge">timedatectl set-timezone Europe/Madrid</code>.</p>

<p>Ahora que hemos hecho esos cambios, vamos a actualizarla e instalar algún paquete. Para manejar los paquetes en CentOS, usamos el comando <code class="language-plaintext highlighter-rouge">yum</code>.</p>

<ul>
  <li>Actualizar:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum update
</code></pre></div>    </div>
  </li>
  <li>Instalar:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nb">install</span> &lt;nombre_paquete&gt;
</code></pre></div>    </div>
  </li>
</ul>

<p>Por ejemplo, podemos instalar el editor de texto <code class="language-plaintext highlighter-rouge">vim</code>.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nb">install </span>vim
</code></pre></div></div>

<ul>
  <li>Eliminar:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum remove &lt;nombre_paquete&gt;
</code></pre></div>    </div>
  </li>
</ul>

<p>Por ejemplo, podemos eliminar el paquete que acabamos de instalar.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum remove vim
</code></pre></div></div>

<p>Si al final de estos comandos ponemos la opción <code class="language-plaintext highlighter-rouge">-y</code>, no será necesario confirmar que queremos actualizar, instalar o eliminar un paquete.</p>

<p>Con esto podemos dar por finalizado este post, en posteriores posts le daremos uso a la Raspberry y realizarle una configuración más avanzada.</p>

<h2 id="aporte-extra">Aporte extra</h2>

<p>Trabajando con CentOS en Raspberry Pi por defecto no vienen disponibles los repositorios <em>epel</em>, pero podemos activarlos sin mayor inconveniente.
En la <a href="https://wiki.centos.org/SpecialInterestGroup/AltArch/armhfp#How_Can_I_Enable_EPEL_7_on_armhfp_.3F">Wiki de CentOS</a> te indican cómo activarlo.</p>

<p>Para ello hay que ejecutar lo siguiente:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat &gt; /etc/yum.repos.d/epel.repo &lt;&lt; EOF
[epel]
name=Epel rebuild for armhfp
baseurl=https://armv7.dev.centos.org/repodir/epel-pass-1/
enabled=1
gpgcheck=0

EOF
</code></pre></div></div>

<p>Eso creará un fichero indicando que también busque en los repositorios de la URL indicada.</p>

<p>Una vez hecho, actualizamos con <code class="language-plaintext highlighter-rouge">yum update -y</code> y ya podremos seguir trabajando.</p>

<p>Espero que os haya gustado y os haya servido de ayuda. ¡Hasta la próxima!</p>

:ET